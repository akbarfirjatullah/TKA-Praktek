generator client {
  provider = "prisma-client-js"
}

datasource db {
  provider = "mysql"
  url      = env("DATABASE_URL")
}

// Model untuk tabel users
model User {
  id               Int          @id @default(autoincrement())
  name             String       @db.VarChar(100)
  email            String       @unique @db.VarChar(100)
  password         String       @db.VarChar(255)
  role             Role
  classOrPosition  String?      @map("class_or_position") @db.VarChar(50)
  createdAt        DateTime     @default(now()) @map("created_at")
  
  attendances      Attendance[]

  @@map("users")
}

model Attendance {
  id        Int              @id @default(autoincrement())
  userId    Int              @map("user_id")
  date      DateTime         @db.Date
  time      DateTime         @db.Time(0)
  status    AttendanceStatus @default(hadir)
  notes     String?          @db.Text
  createdAt DateTime         @default(now()) @map("created_at")
  
  user      User             @relation(fields: [userId], references: [id], onDelete: Cascade)

  @@unique([userId, date], name: "unique_attendance")
  @@map("attendance")
}

enum Role {
  siswa     
  karyawan  
  admin     
}

enum AttendanceStatus {
  hadir 
  izin   
  sakit  
  alpha 
}